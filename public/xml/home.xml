<krpano version="1.17">
  <!-- 导入文字显示插件 -->
  <!-- <include url="./plugins/showtext.xml" /> -->
  <!-- 显示弹窗插件 -->
  <!-- <include url="./xml/pp_blur.xml" /> -->
  <!-- 用于显示当前拖动信息元素 -->
  <!-- <plugin name="hotspot_pos_info"
	    type="text"
	    html="drag the hotspots..."
	    css="font-family:Courier;"
	    padding="8"
	    align="righttop" x="0" y="0"
	    width="200"
	    enabled="false"
	/> -->
  <view hfov="180" vfov="180" fov="90"  hlookat="0.0" vlookat="0.0" limitview="range " 
        hlookatmin="-180" hlookatmax="180"  
        vlookatmin="-90" vlookatmax="90"
    />
  <!-- 预览图设置 -->
  <preview url="../WechatIMG50.jpeg" details="2" type="SPHERE" />
  <!-- 全景图设置 -->
  <image type="SPHERE" >
    <sphere url="../WechatIMG50.jpeg"/>
  </image>
  <!-- 显示文字样式 -->
  <!-- <textstyle name="STYLE4"
        font="Arial" fontsize.no-mobile="12" fontsize.mobile="28" bold="true"
	    background="true" backgroundcolor="0x000000" backgroundalpha="0.667"
	    border="true" borderwidth="1" bordercolor="0xFFFFFF" roundedge="10"
	    textcolor="0xFFFFFF"
	    padding="6 10"
	    textalign="center"
	    yoffset.no-touch="-5"
	    yoffset.touch="-40"
	/> -->
  <!-- 对应按键进行控制 -->
  <control 
		usercontrol="all" 
		keycodesleft="37"
		keycodesright="39" 
        keycodesup="38" 
        keycodesdown="40"  
        keycodesin="96" 
        keycodesout="97" 
        keydownrepeat="true"  
        bouncinglimits="false"/>
  <!-- 设置自动旋转 -->
  <autorotate enabled="false"  waittime="1" speed="10.0" accel="0.5" horizon="0.0" />
  <!-- 热点拖拽功能 -->
  <action name="draghotspot">
		spheretoscreen(ath, atv, hotspotcenterx, hotspotcentery, calc(mouse.stagex LT stagewidth/2 ? 'l' : 'r'));
		sub(drag_adjustx, mouse.stagex, hotspotcenterx);
		sub(drag_adjusty, mouse.stagey, hotspotcentery);
		asyncloop(pressed,
			sub(dx, mouse.stagex, drag_adjustx);
			sub(dy, mouse.stagey, drag_adjusty);
			screentosphere(dx, dy, ath, atv);
			print_hotspot_pos();
		  );
	</action>
  <!-- 显示当前定位到xml中 -->
  <action name="print_hotspot_pos">
    <![CDATA[
		copy(print_ath, ath);
		copy(print_atv, atv);
		roundval(print_ath, 3);
		roundval(print_atv, 3);
        js(app.test(get(print_ath), get(print_atv)))
		calc(plugin[hotspot_pos_info].html, '&lt;hotspot name="' + name + '"[br]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...[br]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ath="' + print_ath + '"[br]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atv="' + print_atv + '"[br]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...[br]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&gt;');
	]]>
  </action>
  <!-- 动态添加热点上方文字 -->
  <action name="add_all_the_time_tooltip">
    <!-- 生成顶部文字 -->
        txtadd(tooltipname, 'tooltip_', get(name));
        jscall(calc('console.log("text: ' + get(tooltipname) + '")'));
        addplugin(get(tooltipname));
        txtadd(plugin[get(tooltipname)].parent, 'hotspot[', get(name), ']');
        set(plugin[get(tooltipname)].url,'%SWFPATH%/plugins/textfield.swf');
        set(plugin[get(tooltipname)].align, top);
        set(plugin[get(tooltipname)].edge,bottom);
        set(plugin[get(tooltipname)].x, 0);
        set(plugin[get(tooltipname)].y, -5);
        set(plugin[get(tooltipname)].autowidth,true);
        set(plugin[get(tooltipname)].autoheight,true);
        set(plugin[get(tooltipname)].vcenter,true);
        set(plugin[get(tooltipname)].background,true);
        set(plugin[get(tooltipname)].backgroundcolor,0x000000);
        set(plugin[get(tooltipname)].roundedge,5);
        set(plugin[get(tooltipname)].backgroundalpha,0.65);
        set(plugin[get(tooltipname)].padding,5);
        set(plugin[get(tooltipname)].border,false);
        set(plugin[get(tooltipname)].glow,0);
        set(plugin[get(tooltipname)].glowcolor,0xFFFFFF);
        set(plugin[get(tooltipname)].css,'text-align:center; color:#FFFFFF; font-family:MicrosoftYahei;  font-size:12px;');
        if(device.mobile,set(plugin[get(tooltipname)].css,'text-align:center; color:#FFFFFF; font-family:MicrosoftYahei; font-weight:bold; font-size:24px;');
        );
        set(plugin[get(tooltipname)].textshadow,0);
        set(plugin[get(tooltipname)].textshadowrange,6.0);
        set(plugin[get(tooltipname)].textshadowangle,90);
        set(plugin[get(tooltipname)].enabled,false);
        set(plugin[get(tooltipname)].html, "");
        txtadd(bordername,'border_', get(name));
        addplugin(get(bordername));
        txtadd(plugin[get(bordername)].parent, 'hotspot[', get(name), ']');
        set(plugin[get(tooltipname)].url,'%SWFPATH%/plugins/textfield.swf');
        set(plugin[get(bordername)].align, center);
        set(plugin[get(bordername)].x, 0);
        set(plugin[get(bordername)].y, 0);
        set(plugin[get(bordername)].autowidth, true);
        set(plugin[get(bordername)].autoheight, true);
        set(plugin[get(bordername)].vcenter,true);
        set(plugin[get(bordername)].background,false);
        set(plugin[get(bordername)].roundedge, 20);
        set(plugin[get(bordername)].backgroundalpha, 1);
        set(plugin[get(bordername)].border, true);
        set(plugin[get(bordername)].bordercolor, 0x000000);
        set(plugin[get(bordername)].borderwidth, 1.0);
        set(plugin[get(bordername)].shadow, 0.2);
        set(plugin[get(bordername)].shadowcolor, 0x000000);
        set(plugin[get(bordername)].shadowalpha, 1.0);
        set(plugin[get(bordername)].html, "真香");
        set(plugin[get(bordername)].visible, true);
        jscall(calc('console.log("border: ' + get(bordername) + '")'));
  
  
  
  
  </action>
  <!-- <hotspot type="image"  url="./img/test_logo.png"  name="xiang"/> -->
  <style 
        name="your_hotspotstyle" 
        distorted="false" 
        onloaded="add_all_the_time_tooltip();"
    />
</krpano>
